<div class="card-container">
  <mat-card class="form-card">
    <mat-card-header class="center-content">
      <img src="../../assets/images/TextLogo.png" alt="My Flix" />
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="30"></mat-spinner>
        <p class="loading-text">Logging in...</p>
      </div>
      <form
        *ngIf="!loading"
        [formGroup]="loginForm"
        (ngSubmit)="loginUser()"
        class="form-container"
      >
        <div class="form-content">
          <mat-form-field class="input-field">
            <input
              matInput
              formControlName="Username"
              placeholder="Username"
              type="text"
              required
            />
            <div
              class="error-message"
              *ngIf="
                loginForm.controls['Username'].invalid &&
                loginForm.controls['Username'].touched
              "
            >
              <mat-error
                *ngIf="loginForm.controls['Username'].hasError('required')"
              >
                Username is required.
              </mat-error>
            </div>
          </mat-form-field>
          <mat-form-field class="input-field">
            <input
              matInput
              formControlName="Password"
              type="password"
              placeholder="Password"
              required
              (keydown.enter)="loginUser()"
            />
            <div
              class="error-message"
              *ngIf="
                loginForm.controls['Password'].invalid &&
                loginForm.controls['Password'].touched
              "
            >
              <mat-error
                *ngIf="loginForm.controls['Password'].hasError('required')"
              >
                Password is required.
              </mat-error>
            </div>
          </mat-form-field>
          <!-- Error message when loginError is true -->
          <div *ngIf="loginError" class="error-message">
            <p>Invalid username or password. Please try again.</p>
          </div>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions class="center-content">
      <button
        mat-raised-button
        [disabled]="loginForm.invalid"
        (click)="loginUser()"
        color="primary"
        class="login-button"
      >
        Log In
      </button>
    </mat-card-actions>
  </mat-card>
</div>
